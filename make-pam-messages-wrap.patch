From 77b1c8c320b9ea7e703b193693cf98d12f0f6b52 Mon Sep 17 00:00:00 2001
From: Ray Strode <rstrode@redhat.com>
Date: Fri, 9 Aug 2013 18:11:27 -0400
Subject: [PATCH 1/2] greeter: make auth labels wrap if they become too long

---
 gui/simple-greeter/gdm-greeter-login-window.ui |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/gui/simple-greeter/gdm-greeter-login-window.ui b/gui/simple-greeter/gdm-greeter-login-window.ui
index 3c81b35..b1e381e 100644
--- a/gui/simple-greeter/gdm-greeter-login-window.ui
+++ b/gui/simple-greeter/gdm-greeter-login-window.ui
@@ -168,6 +168,7 @@
                             <property name="spacing">6</property>
                             <child>
                               <object class="GtkLabel" id="auth-prompt-label">
+                                <property name="wrap">True</property>
                                 <property name="visible">True</property>
 
                                 <accessibility>
@@ -210,6 +211,7 @@
                             <child>
                               <object class="GtkLabel" id="auth-message-label">
                                 <property name="visible">True</property>
+                                <property name="wrap">True</property>
                               </object>
                               <packing>
                                 <property name="position">0</property>
-- 
1.7.1


From 81bd60ac9fad979166400ef0f589a0a3bb981578 Mon Sep 17 00:00:00 2001
From: Ray Strode <rstrode@redhat.com>
Date: Mon, 12 Aug 2013 17:17:44 -0400
Subject: [PATCH 2/2] greeter: force dialog to be 600pixels or less

Anymore than this and it really looks stretched on most machines.
---
 gui/simple-greeter/gdm-greeter-login-window.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/gui/simple-greeter/gdm-greeter-login-window.c b/gui/simple-greeter/gdm-greeter-login-window.c
index ed3168b..08a27e1 100644
--- a/gui/simple-greeter/gdm-greeter-login-window.c
+++ b/gui/simple-greeter/gdm-greeter-login-window.c
@@ -1274,10 +1274,12 @@ gdm_greeter_login_window_size_request (GtkWidget      *widget,
         requisition->width += 2 * GTK_CONTAINER (widget)->border_width;
         requisition->height += 2 * GTK_CONTAINER (widget)->border_width;
 
-        /* Make width be at least 33% screen width
+        /* Make width be at least 33% screen width, and at
+         * most 80% screen width, and at most 600pixels,
          * and height be at most 80% of screen height
          */
-        requisition->width = MAX (requisition->width, .33 * area.width);
+        requisition->width = CLAMP (requisition->width, .33 * area.width, .80 * area.width);
+        requisition->width = MIN (requisition->width, 600);
         requisition->height = MIN (requisition->height, .80 * area.height);
 
        /* Don't ever shrink window width
-- 
1.7.1

